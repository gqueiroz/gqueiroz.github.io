<!DOCTYPE html>
<html class="writer-html5" lang="pt-BR" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1.4. QGIS &mdash; BDGeo</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/table_styling.css" type="text/css" />
      <link rel="stylesheet" href="../_static/bd-geoespacial.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="canonical" href="https://prog-geo.github.io/instalacao/qgis.html" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/translations.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Buscar" href="../search.html" />
    <link rel="next" title="1.5. Configurações" href="configuracao.html" />
    <link rel="prev" title="1.3. pgAdmin 4" href="pg-admin.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F0F8FF" >
            <a href="../index.html" class="icon icon-home"> BDGeo
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Pesquisar documentos" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Menu de navegação">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Bancos de Dados Geográficos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Aulas:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">1. Instalando e Configurando o Ambiente de Trabalho</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="docker.html">1.1. Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="pg-pgis.html">1.2. PostgreSQL e PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="pg-admin.html">1.3. pgAdmin 4</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.4. QGIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#instalacao-no-linux-ubuntu">1.4.1. Instalação no Linux Ubuntu</a></li>
<li class="toctree-l3"><a class="reference internal" href="#instalando-o-qgis-atraves-de-um-conteiner-docker">1.4.2. Instalando o QGIS através de um Contêiner Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="configuracao.html">1.5. Configurações</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sgbd/index.html">2. Sistemas de Bancos de Dados Relacionais</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tipos-geometricos/index.html">3. Tipos de Dados e Operações Espaciais</a></li>
<li class="toctree-l1"><a class="reference internal" href="../consultas-espaciais/index.html">4. Consultas Espaciais</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prog-servidor/index.html">5. Programação do Lado Servidor no PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../estrutura-dados/index.html">6. Estruturas de Dados e Métodos de Acesso Multidimensionais</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algo-geom/index.html">7. Algoritmos Geométricos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Referências Bibliográficas</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../referencias.html">Referências Bibliográficas</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Listas de Exercícios:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../listas.html">Listas de Exercícios</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Informações Gerais:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../licenca.html">Licença</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Agradecimentos:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../agradecimentos.html">Agradecimentos</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Menu de navegação móvel"  style="background: #F0F8FF" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BDGeo</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Navegação da página">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">1. </span>Instalando e Configurando o Ambiente de Trabalho</a> &raquo;</li>
      <li><span class="section-number">1.4. </span>QGIS</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Navegação sequencial da página">
        <a href="pg-admin.html" class="btn btn-neutral float-left" title="1.3. pgAdmin 4" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="configuracao.html" class="btn btn-neutral float-right" title="1.5. Configurações" accesskey="n">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="qgis">
<span id="sec-instalacao-qgis"></span><h1><span class="section-number">1.4. </span>QGIS<a class="headerlink" href="#qgis" title="Link permanente para este cabeçalho"></a></h1>
<a class="reference internal image-reference" href="../_images/qgis.svg"><img alt="QGIS" class="align-right" src="../_images/qgis.svg" width="128" /></a>
<p>Este documento apresenta os passos necessários para instalação do software livre QGIS no Linux Ubuntu ou através do Docker. Utilizaremos a versão estável denominada <cite>3.16 Hannover</cite>.</p>
<section id="instalacao-no-linux-ubuntu">
<span id="sec-instalacao-qgis-ubuntu"></span><h2><span class="section-number">1.4.1. </span>Instalação no Linux Ubuntu<a class="headerlink" href="#instalacao-no-linux-ubuntu" title="Link permanente para este cabeçalho"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Os passos apresentados abaixo foram realizados no Ubuntu Bionic (18.04 LTS). No entanto, devem funcionar para as versões Ubuntu Focal (20.04 LTS) e Ubuntu Xenial (16.04 LTS).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Ao invés de instalar o QGIS diretamente no sistema operacional da sua máquina, é possível usar o Docker. Neste caso, consulte a <a class="reference internal" href="#sec-instalacao-qgis-docker"><span class="std std-numref">Seção 1.4.2</span></a>.</p>
</div>
<p>Garanta que você tenha as ferramentas adequadas para instalação do pacote com o QGIS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>

<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">gnupg</span> <span class="n">software</span><span class="o">-</span><span class="n">properties</span><span class="o">-</span><span class="n">common</span>
</pre></div>
</div>
<p>Utilize o seguinte comando para importar a chave de assinatura do repositório:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">qO</span> <span class="o">-</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">qgis</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">downloads</span><span class="o">/</span><span class="n">qgis</span><span class="o">-</span><span class="mf">2020.</span><span class="n">gpg</span><span class="o">.</span><span class="n">key</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">gpg</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">keyring</span> <span class="o">--</span><span class="n">keyring</span> <span class="n">gnupg</span><span class="o">-</span><span class="n">ring</span><span class="p">:</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">trusted</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">qgis</span><span class="o">-</span><span class="n">archive</span><span class="o">.</span><span class="n">gpg</span> <span class="o">--</span><span class="kn">import</span>

<span class="nn">sudo</span> <span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">r</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">trusted</span><span class="o">.</span><span class="n">gpg</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">qgis</span><span class="o">-</span><span class="n">archive</span><span class="o">.</span><span class="n">gpg</span>
</pre></div>
</div>
<p>Inclua o repositório do QGIS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="s2">&quot;deb https://qgis.org/ubuntu $(lsb_release -c -s) main&quot;</span>
</pre></div>
</div>
<p>Em seguida, atualize sua lista de pacotes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</pre></div>
</div>
<p>Finalmente, para instalar o QGIS, utilize o seguinte comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">qgis</span> <span class="n">qgis</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">grass</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se quiser instalar o QGIS Server, acrescente o pacote <code class="docutils literal notranslate"><span class="pre">qgis-server</span></code> na linha acima.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Mais informações sobre a instalação podem ser encontradas em <a class="reference external" href="https://www.qgis.org/en/site/forusers/alldownloads.html">QGIS Installers</a>.</p>
</div>
</section>
<section id="instalando-o-qgis-atraves-de-um-conteiner-docker">
<span id="sec-instalacao-qgis-docker"></span><h2><span class="section-number">1.4.2. </span>Instalando o QGIS através de um Contêiner Docker<a class="headerlink" href="#instalando-o-qgis-atraves-de-um-conteiner-docker" title="Link permanente para este cabeçalho"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Se você já tiver instalado o QGIS com os passos descritos na <a class="reference internal" href="#sec-instalacao-qgis-ubuntu"><span class="std std-numref">Seção 1.4.1</span></a>, não há necessidade de seguir os passos desta seção.</p>
</div>
<p>Esta seção irá mostrar como criar uma imagem Docker que permita lançar o aplicativo QGIS versão 3.24 a partir de um contêiner Docker.</p>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Estamos considerando o uso do Docker em um sistema Linux.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Antes de começar, verifique se você consegue executar o comando <code class="docutils literal notranslate"><span class="pre">id</span></code>, que fornece informações sobre um determinado usuário do sistema operacional e seus grupos:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">id</span>
</pre></div>
</div>
<p>No caso da minha instalação Linux, meu usuário se chama <code class="docutils literal notranslate"><span class="pre">gilberto</span></code>, seu <code class="docutils literal notranslate"><span class="pre">UID</span></code> é <code class="docutils literal notranslate"><span class="pre">1000</span></code>, e o grupo principal, <code class="docutils literal notranslate"><span class="pre">gilberto</span></code> com <code class="docutils literal notranslate"><span class="pre">GID</span></code> <code class="docutils literal notranslate"><span class="pre">1000</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">gilberto</span><span class="p">)</span> <span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">gilberto</span><span class="p">)</span> <span class="n">groups</span><span class="o">=</span><span class="mi">1000</span><span class="p">(</span><span class="n">gilberto</span><span class="p">),</span><span class="o">...</span>
</pre></div>
</div>
<p>Os comandos abaixo irão utilizar este aplicativo em linha de comando para obter informações do seu usuário e então criar um usuário equivalente no sistema da imagem que iremos preparar.</p>
</div>
<section id="criando-a-imagem-docker-bdgeo-qgis">
<h3><span class="section-number">1.4.2.1. </span>Criando a Imagem Docker <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code><a class="headerlink" href="#criando-a-imagem-docker-bdgeo-qgis" title="Link permanente para este cabeçalho"></a></h3>
<p>Copie o arquivo <cite>Dockerfile</cite> mostrado abaixo (<a class="reference internal" href="#code-qgis-docker-dockerfile"><span class="std std-numref">Trecho de Código 1.1</span></a>) para um diretório exclusivo, de onde realizaremos a construção da imagem <cite>Docker</cite>:</p>
<div class="literal-block-wrapper docutils container" id="code-qgis-docker-dockerfile">
<div class="code-block-caption"><span class="caption-number">Trecho de Código 1.1 - </span><span class="caption-text"><a class="reference download internal" download="" href="../_downloads/7db6bfcd0a067e537471a45256504326/Dockerfile"><code class="xref download docutils literal notranslate"><span class="pre">Dockerfile</span></code></a>.</span><a class="headerlink" href="#code-qgis-docker-dockerfile" title="Link Permanente para esse código"></a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>ARG BASE_IMAGE=qgis/qgis:release-3_24
<span class="linenos"> 2</span>FROM ${BASE_IMAGE}
<span class="linenos"> 3</span>
<span class="linenos"> 4</span>LABEL img.author=&quot;Gilberto Ribeiro de Queiroz&quot; \
<span class="linenos"> 5</span>      img.description=&quot;Este script possibilita a criação de \
<span class="linenos"> 6</span>uma imagem com o aplicativo QGIS que facilita o compartilhamento \
<span class="linenos"> 7</span>de volumes entre o host e os contêiners criados a partir dela.&quot;
<span class="linenos"> 8</span>
<span class="linenos"> 9</span>ARG ROOT_USER=root
<span class="linenos">10</span>ARG QGIS_USER_NAME=qgis
<span class="linenos">11</span>ARG QGIS_USER_ID=1000
<span class="linenos">12</span>ARG QGIS_USER_GROUP=qgis
<span class="linenos">13</span>ARG QGIS_USER_GROUP_ID=1000
<span class="linenos">14</span>
<span class="linenos">15</span>RUN pip3 install --upgrade pip &amp;&amp; \
<span class="linenos">16</span>    pip3 install --upgrade setuptools &amp;&amp; \
<span class="linenos">17</span>    pip3 install --upgrade wheel &amp;&amp; \
<span class="linenos">18</span>    pip3 install pb_tool
<span class="linenos">19</span>
<span class="linenos">20</span>RUN groupadd --gid ${QGIS_USER_GROUP_ID} ${QGIS_USER_GROUP} &amp;&amp; \
<span class="linenos">21</span>    useradd --create-home \
<span class="linenos">22</span>            --shell /bin/bash \
<span class="linenos">23</span>            --uid ${QGIS_USER_ID} \
<span class="linenos">24</span>            --gid ${QGIS_USER_GROUP} ${QGIS_USER_NAME}
<span class="linenos">25</span>
<span class="linenos">26</span>USER ${QGIS_USER_NAME}
<span class="linenos">27</span>
<span class="linenos">28</span>WORKDIR /home/${QGIS_USER_NAME}
<span class="linenos">29</span>
<span class="linenos">30</span>USER ${ROOT_USER}
</pre></div>
</div>
</div>
<p>Abra o terminal de comandos do seu sistema operacional e vá para o diretório onde colocou os arquivos acima. Neste diretório, execute o comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">build</span></code> para criar a imagem <cite>Docker</cite>, como indicado abaixo:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker build --build-arg QGIS_USER_NAME=`id --name --user` \
             --build-arg QGIS_USER_ID=`id --user` \
             --build-arg QGIS_USER_GROUP=`id --name --group` \
             --build-arg QGIS_USER_GROUP_ID=`id --group` \
             -t bdgeo/qgis:3.24 \
             --no-cache .
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para facilitar o gerenciamento do compartilhamento do sistema de arquivos entre o <em>host</em> e os contêiners criados a partir dessa imagem, iremos adicionar um usuário no sistema operacional da imagem com os mesmos nomes e valores do seu usuário e grupo principal. Caso você não tenha o aplicativo <code class="docutils literal notranslate"><span class="pre">id</span></code>, forneça os valores manualmente.</p>
</div>
<p>O comando acima fará, inicialmente, com que algumas imagens e camadas bases, necessárias à criação da imagem <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code>, sejam recuperadas do <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>. A <a class="reference internal" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-01"><span class="std std-numref">Figura 1.30</span></a> mostra essa parte inicial do processo de construção da imagem <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code>.</p>
<figure class="align-center align-default" id="fig-instalacao-qgis-docker-build-bdgeo-qgis-01">
<a class="reference internal image-reference" href="../_images/docker-build-bdgeo-qgis-01.png"><img alt="Construindo a imagem Docker chamada bdgeo/qgis" src="../_images/docker-build-bdgeo-qgis-01.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.30 - </span><span class="caption-text">Construindo a imagem Docker chamada <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code>.</span><a class="headerlink" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-01" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Assim que o <em>download</em> e extração dessas imagens e camadas bases terminarem, o processo de construção irá começar a executar os demais comandos contidos no <cite>Dockerfile</cite>, como mostrado na <a class="reference internal" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-02"><span class="std std-numref">Figura 1.31</span></a>.</p>
<figure class="align-center align-default" id="fig-instalacao-qgis-docker-build-bdgeo-qgis-02">
<a class="reference internal image-reference" href="../_images/docker-build-bdgeo-qgis-02.png"><img alt="Etapas de construção da imagem bdgeo/qgis" src="../_images/docker-build-bdgeo-qgis-02.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.31 - </span><span class="caption-text">Etapas de construção da imagem <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code>.</span><a class="headerlink" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-02" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Após algum tempo realizando a construção da imagem, duas mensagens notificando o sucesso da operação deverão ser escritas no terminal, como mostrado na <a class="reference internal" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-03"><span class="std std-numref">Figura 1.32</span></a>.</p>
<figure class="align-center align-default" id="fig-instalacao-qgis-docker-build-bdgeo-qgis-03">
<a class="reference internal image-reference" href="../_images/docker-build-bdgeo-qgis-03.png"><img alt="Finalização do processo de construção da imagem bdgeo/qgis" src="../_images/docker-build-bdgeo-qgis-03.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.32 - </span><span class="caption-text">Finalização do processo de construção da imagem <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis</span></code>.</span><a class="headerlink" href="#fig-instalacao-qgis-docker-build-bdgeo-qgis-03" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Consulte se a imagem criada aperece na lista das imagens disponíveis no seu sistema:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">image</span> <span class="n">ls</span>
</pre></div>
</div>
<p>Uma linha como a mostrada abaixo deverá ser apresentada:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">REPOSITORY</span>      <span class="n">TAG</span>     <span class="n">IMAGE</span> <span class="n">ID</span>        <span class="n">CREATED</span>           <span class="n">SIZE</span>
<span class="n">bdgeo</span><span class="o">/</span><span class="n">qgis</span>    <span class="mf">3.24</span>    <span class="mi">12</span><span class="n">c309ef8e91</span>    <span class="mi">7</span> <span class="n">minutes</span> <span class="n">ago</span>     <span class="mf">7.4</span><span class="n">GB</span>
</pre></div>
</div>
</section>
<section id="criando-o-conteiner-bdgeo-qgis">
<h3><span class="section-number">1.4.2.2. </span>Criando o Contêiner <code class="docutils literal notranslate"><span class="pre">bdgeo-qgis</span></code><a class="headerlink" href="#criando-o-conteiner-bdgeo-qgis" title="Link permanente para este cabeçalho"></a></h3>
<div class="admonition warning">
<p class="admonition-title">Aviso</p>
<p>Estamos supondo que seu usuário é capaz de criar contêiners sem a necessidade de utilizar <code class="docutils literal notranslate"><span class="pre">sudo</span></code>.</p>
</div>
<p>Uma vez criada a imagem <code class="docutils literal notranslate"><span class="pre">bdgeo/qgis:3.24</span></code>, é possível criar um contêiner que permita utilizar o QGIS. Mas antes, vamos criar dois diretórios que possam ser compartilhados como volumes entre o seu <em>host</em> e o novo contêiner que será criado mais adiante. Sugerimos criar os seguintes diretórios:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gilberto</span><span class="o">/</span><span class="n">Aulas</span><span class="o">/</span><span class="n">bdgeo</span><span class="o">/</span><span class="n">QGIS</span><span class="o">-</span><span class="n">Config</span>
<span class="n">mkdir</span> <span class="o">-</span><span class="n">p</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">gilberto</span><span class="o">/</span><span class="n">Data</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Substitua o nome de usuário <code class="docutils literal notranslate"><span class="pre">gilberto</span></code> pelo seu.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para que o <em>display</em> do seu <em>host</em> possa ser usado pelos processos do contêiner que será criado, use o comando:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># permite que qualquer usuário se conecte ao servidor X do seu sistema.</span>
<span class="n">xhost</span> <span class="o">+</span>
</pre></div>
</div>
<p>Lembre-se de fazer isso antes do comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> mostrado abaixo.</p>
</div>
<p>O comando abaixo fará com que um contêiner chamado <code class="docutils literal notranslate"><span class="pre">bdgeo-qgis</span></code> seja criado e colocado em execução:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker run --detach \
           --name bdgeo-qgis \
           --volume /tmp/.X11-unix:/tmp/.X11-unix \
           --volume &quot;/home/$(id --name --user)/aulas/bd/qgis-config:/home/$(id --name --user)/.local/share/QGIS/QGIS3&quot; \
           --volume &quot;/home/$(id --name --user)/aulas/data:/home/$(id --name --user)/Data&quot; \
           --env DISPLAY=unix$DISPLAY \
           --user `id --name --user` \
           bdgeo/qgis:3.24 qgis
</pre></div>
</div>
<p>Esse comando pressupõe a existência dos dois diretórios mencionados e que o usuário criado na imagem também possui o mesmo nome do seu (do <em>host</em>). Caso você tenha optado por caminhos diferentes ou nome diferente de usuário, faça os devidos ajustes no comando acima antes de executá-lo.</p>
</section>
<section id="inicializando-o-qgis">
<h3><span class="section-number">1.4.2.3. </span>Inicializando o QGIS<a class="headerlink" href="#inicializando-o-qgis" title="Link permanente para este cabeçalho"></a></h3>
<p>O comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> da seção anterior fará com que uma janela como a mostrada na <a class="reference internal" href="#fig-instalacao-qgis-docker-qgis-01"><span class="std std-numref">Figura 1.33</span></a> seja apresentada.</p>
<figure class="align-center align-default" id="fig-instalacao-qgis-docker-qgis-01">
<a class="reference internal image-reference" href="../_images/docker-qgis-01.png"><img alt="Janela de boas vindas ao QGIS" src="../_images/docker-qgis-01.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.33 - </span><span class="caption-text">Janela de boas vindas ao <cite>QGIS</cite>.</span><a class="headerlink" href="#fig-instalacao-qgis-docker-qgis-01" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Pressione o botão <code class="docutils literal notranslate"><span class="pre">Let's</span> <span class="pre">get</span> <span class="pre">started!</span></code> para abrir a janela principal do <cite>QGIS</cite> (<a class="reference internal" href="#fig-instalacao-qgis-docker-qgis-02"><span class="std std-numref">Figura 1.34</span></a>).</p>
<figure class="align-center align-default" id="fig-instalacao-qgis-docker-qgis-02">
<a class="reference internal image-reference" href="../_images/docker-qgis-02.png"><img alt="Janela principal do QGIS" src="../_images/docker-qgis-02.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-number">Figura 1.34 - </span><span class="caption-text">Janela principal do <cite>QGIS</cite>.</span><a class="headerlink" href="#fig-instalacao-qgis-docker-qgis-02" title="Link Permanente para essa imagem"></a></p>
</figcaption>
</figure>
<p>Quando você encerrar o QGIS, o contêiner será interrompido. Para inicializar novamente este contêiner, use o comando <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">start</span> <span class="n">bdgeo</span><span class="o">-</span><span class="n">qgis</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se quiser entrar no terminal do contêiner criado como usuário <code class="docutils literal notranslate"><span class="pre">root</span></code>, faça:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">exec</span> <span class="o">-</span><span class="n">it</span> <span class="n">bdgeo</span><span class="o">-</span><span class="n">qgis</span> <span class="n">bash</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se quiser entrar no terminal do contêiner criado com o usuário informado na criação da imagem, faça:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker exec -it -u `id --name --user` bdgeo-qgis bash
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se quiser conferir outras imagens base do QGIS, consulte o repositório <a class="reference external" href="https://hub.docker.com/r/qgis/qgis">qgis/qgis</a> no Docker Hub.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>O <cite>Dockerfile</cite> mostrado nesta seção pode ser usado para construção de imagens com outras versões do QGIS. Se você quiser experimentar a versão 3.16 do QGIS, acrescente à opção <code class="docutils literal notranslate"><span class="pre">--build-arg</span></code> a versão correta da imagem do QGIS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>docker build --build-arg &quot;BASE_IMAGE=qgis/qgis:release-3_16&quot; \
             --build-arg QGIS_USER_NAME=`id --name --user` \
             --build-arg QGIS_USER_ID=`id --user` \
             --build-arg QGIS_USER_GROUP=`id --name --group` \
             --build-arg QGIS_USER_GROUP_ID=`id --group` \
             -t bdgeo/qgis:3.16 \
             --no-cache .
</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Rodapé">
        <a href="pg-admin.html" class="btn btn-neutral float-left" title="1.3. pgAdmin 4" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="configuracao.html" class="btn btn-neutral float-right" title="1.5. Configurações" accesskey="n" rel="next">Próximo <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Gilberto Queiroz.</p>
  </div>

  
<jinja2.runtime.BlockReference object at 0x7f4a442ff970>
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png" width="117" height="41"/></a> This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons “Attribution-NonCommercial-ShareAlike 4.0 International” license</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165908761-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-165908761-1', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>